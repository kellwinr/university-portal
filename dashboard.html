<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UTAR Portal — Dashboard (Demo)</title>
  <link rel="stylesheet" href="./assets/css/styles.css"s/>
</head>
<body>

  <!-- ===== Header (Two-row) ===== -->
  <header class="tworow">
    <!-- Row 1: Logo -->
    <div class="logo-section">
      <img class="brand-logo" src="assets/img/Universiti_Tunku_Abdul_Rahman_Logo.jpg" alt="UTAR Logo" />
      <div class="logo-text">
        <strong>UNIVERSITI TUNKU ABDUL RAHMAN</strong>
        <small>University Portal (Demo)</small>
      </div>
    </div>

    <!-- Row 1: Utilities -->
    <div class="top-utils">
      <form class="portal-search" role="search" onsubmit="return false;">
        <input type="search" placeholder="Search courses, codes, people…" />
      </form>

      <button class="icon-btn bell" aria-label="Notifications">
        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none" stroke-width="1.8">
          <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5"/>
          <path d="M9 17a3 3 0 0 0 6 0"/>
        </svg>
        <span class="badge" id="notifBadge">3</span>
      </button>

      <span class="id-chip" id="chipId">ID: —</span>

      <div class="menu-item">
        <a href="#" class="avatar-trigger pill" aria-haspopup="true" aria-expanded="false" style="padding:0;border:none;background:transparent;">
          <img class="avatar" src="assets/img/avatar-student.png" alt="Profile" />
        </a>
        <div class="dropdown" id="dropdownProfile">
          <a href="#">Profile &amp; Settings</a>
          <a href="#">My Documents</a>
          <a href="#">Security</a>
          <a href="#" id="logout">Sign out</a>
        </div>
      </div>
    </div>

    <!-- Row 2: Nav -->
    <nav class="menu-bar">
      <a class="pill is-active" href="#">Home</a>
      <div class="menu-item">
        <a href="#" class="pill menu-trigger">Timetable</a>
        <div class="dropdown">
          <a href="#">Course Registration</a>
        </div>
      </div>
      <div class="menu-item">
        <a href="#" class="pill menu-trigger">Exam</a>
        <div class="dropdown">
          <a href="#">Exam Timetable</a>
          <a href="#">Exam Results</a>
          <a href="#">Guidelines</a>
          <a href="#">Performance Analytics</a>
        </div>
      </div>
      <div class="menu-item">
        <a href="#" class="pill menu-trigger">Clubs &amp; Society</a>
        <div class="dropdown">
          <a href="#">USSDC / CPD</a>
          <a href="#">UTAR CARE</a>
          <a href="#">UTAR LEAD</a>
          <a href="#">UTAR TALENT</a>
          <a href="#">Club &amp; Society Announcements</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- ===== Glass Main Panel ===== -->
  <main class="glass">
    <h1 class="greeting" id="welcome">Hello</h1>
    <p class="desc">This is a static demonstration dashboard. No real data is shown.</p>

    <section class="grid">
      <!-- Quick Access -->
      <article class="card">
        <h2>Quick Access</h2>
        <div class="links">
          <a href="#">WBLE</a>
          <a href="#">WBLE 2.0</a>
          <a href="#">UTAR Official Page</a>
          <a href="#">UTAR Mailmaster</a>
          <a href="#">UTAR Library</a>
        </div>
      </article>

      <!-- Announcements -->
      <article class="card">
        <h2>University Announcements</h2>
        <p>No announcements in this demo.</p>
      </article>

      <!-- Upcoming Exams -->
      <article class="card">
        <h2>Upcoming Exams</h2>
        <table class="table" id="examTable">
          <thead><tr><th>Date</th><th>Course</th><th>Venue</th></tr></thead>
          <tbody></tbody>
        </table>
        <a class="more" href="#">View full schedule →</a>
      </article>

      <!-- Student Snapshot -->
      <article class="card">
        <h2>Student Snapshot</h2>
        <div class="snapshot">
          <div><span>Programme</span><strong>BSc (Hons) Computer Science</strong></div>
          <div><span>Year / Sem</span><strong>Y2 • S1</strong></div>
          <div><span>CGPA</span><strong>3.67</strong></div>
          <div><span>Credits In Progress</span><strong>18</strong></div>
        </div>
        <a class="more" href="#">Open profile →</a>
      </article>
    </section>
  </main>

  <!-- ===== Footer Chip ===== -->
  <footer class="footer-chip">
    © 2025 Universiti Tunku Abdul Rahman — Demo only
    <br>
    <small>Demo only — Universiti Tunku Abdul Rahman is not affiliated with this personal project.</small>
  </footer>

  <!-- ===== Scripts (tiny, no deps) ===== -->
  <script>
  // Demo user from localStorage → welcome + ID chip
  (function(){
    const welcome = document.getElementById('welcome');
    const chipId  = document.getElementById('chipId');
    const raw = localStorage.getItem('demo_user');
    let name = 'Student', id = '';
    try { if (raw){ const d = JSON.parse(raw); name = d?.name || name; id = d?.id || id; } } catch {}
    welcome.textContent = `Hello, ${name}${id ? ` (${id})` : ''}`;
    chipId.textContent  = id ? `ID: ${id}` : 'ID: —';
  })();

  // Mock exam rows
  (function(){
    const tbody = document.querySelector('#examTable tbody'); if (!tbody) return;
    const exams = [
      { date: '28 Oct, 9:00', course: 'UCCD2513 Data Structures', venue: 'KB A-201' },
      { date: '31 Oct, 2:00', course: 'UCCD2223 Web Engineering', venue: 'KB C-105' },
      { date: '04 Nov, 9:00', course: 'UCCD2123 Discrete Math',   venue: 'KB Hall' },
    ];
    tbody.innerHTML = exams.map(e => `<tr><td>${e.date}</td><td>${e.course}</td><td>${e.venue}</td></tr>`).join('');
  })();

  // Clear bell badge when clicked
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.icon-btn.bell')) return;
    const b = document.getElementById('notifBadge'); if (b) b.textContent = '';
  });

  // Simple dropdown portal/hover handling (align to trigger)
  (function(){
    const items = document.querySelectorAll('.menu-item');
    if (!items.length) return;
    let portal = document.getElementById('menu-portal');
    if (!portal){ portal = document.createElement('div'); portal.id='menu-portal'; document.body.appendChild(portal); }

    let openItem=null, openPanel=null, restore=null;
    function move(panel){ const p=panel.parentNode, n=panel.nextSibling; restore={p,n}; portal.appendChild(panel); }
    function putBack(panel){ if(!restore) return; const {p,n}=restore; n? p.insertBefore(panel,n):p.appendChild(panel); restore=null; }
    function measure(panel){
      const was = panel.classList.contains('is-open');
      if(!was){ panel.style.visibility='hidden'; panel.classList.add('is-open'); document.body.offsetHeight; }
      const w = Math.max(panel.offsetWidth, 260), h = panel.offsetHeight;
      if(!was){ panel.classList.remove('is-open'); panel.style.visibility=''; }
      return {w,h};
    }
    function place(item){
      const btn=item.querySelector('.menu-trigger, .avatar-trigger'), panel=openPanel||item.querySelector('.dropdown');
      if(!btn||!panel) return; if(panel.parentNode!==portal) move(panel);
      const r=btn.getBoundingClientRect(), vw=document.documentElement.clientWidth, vh=document.documentElement.clientHeight, EDGE=12, GAP=8;
      const {w:pw,h:ph}=measure(panel);
      let left=Math.min(Math.max(EDGE, r.left), vw - pw - EDGE);
      let top = r.bottom + GAP; if (top + ph + EDGE > vh) top = Math.max(EDGE, r.top - ph - GAP);
      panel.style.left=Math.round(left)+'px'; panel.style.top=Math.round(top)+'px';
    }
    function open(it){ if(openItem===it) return; closeAll(); const btn=it.querySelector('.menu-trigger, .avatar-trigger'); const panel=it.querySelector('.dropdown'); if(!btn||!panel) return;
      it.classList.add('open'); btn.setAttribute('aria-expanded','true'); openItem=it; openPanel=panel; place(it); panel.classList.add('is-open'); }
    function closeAll(){ if(!openItem) return; openItem.classList.remove('open'); openItem.querySelector('.menu-trigger, .avatar-trigger')?.setAttribute('aria-expanded','false');
      if(openPanel){ openPanel.classList.remove('is-open'); openPanel.style.left=''; openPanel.style.top=''; putBack(openPanel); openPanel=null; } openItem=null; }

    items.forEach(it=>{
      const btn=it.querySelector('.menu-trigger, .avatar-trigger'); const panel=it.querySelector('.dropdown'); if(!btn||!panel) return;
      btn.addEventListener('click', e=>{ e.preventDefault(); if(openItem===it) closeAll(); else open(it); });
      btn.addEventListener('pointerenter', ()=>open(it));
      panel.addEventListener('pointerenter', ()=>open(it));
      it.addEventListener('pointerleave', (e)=>{ if(panel.contains(e.relatedTarget)||btn.contains(e.relatedTarget)) return; closeAll(); });
    });
    window.addEventListener('scroll', ()=>{ if(openItem) place(openItem); }, {passive:true});
    window.addEventListener('resize', ()=>{ if(openItem) place(openItem); }, {passive:true});
    window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeAll(); });
  })();

  // Logout (demo): clear saved user and go to index.html (if present)
  document.getElementById('logout')?.addEventListener('click', (e)=>{
    e.preventDefault(); localStorage.removeItem('demo_user'); location.href='index.html';
  });
  </script>
</body>
</html>
